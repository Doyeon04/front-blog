{"ast":null,"code":"var _jsxFileName = \"/Users/yunsmac/Desktop/blog/src/component/PostDetail.js\",\n    _s = $RefreshSig$();\n\nimport { useParams, useLocation } from \"react-router\";\nimport axios from \"axios\";\nimport { useState, useEffect, useRef } from \"react\";\nimport Header from \"./header/Header\";\nimport styles from \"./PostDetail.module.css\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport Content from \"./content/Content\";\nimport { token } from \"./Api\";\nimport styled from \"styled-components\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CommentInput = styled.input`\n  width: 90%;\n  height: 50px;\n  border: 1px solid gray;\n`;\n_c = CommentInput;\nconst CommentContainer = styled.div`\n  height: 800px;\n\n  padding: 50px;\n`;\n_c2 = CommentContainer;\nconst CommentBox = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: space-between;\n`;\n_c3 = CommentBox;\nconst CommentBtn = styled.button`\n  width: 60px;\n  height: 50px;\n  margin-left: 40px;\n  font-size: 12px;\n  border: none;\n  border-radius: 4px;\n  background-color: #b4d8e7;\n  color: white;\n  margin: auto 0;\n`;\n_c4 = CommentBtn;\nconst CommentsUl = styled.ul`\n  margin: 30px 0px;\n  padding: 0;\n`;\n_c5 = CommentsUl;\nconst CommentsLi = styled.li`\n  width: 100%;\n  padding: 0px 10px;\n  list-style: none;\n`;\n_c6 = CommentsLi;\nconst OneComment = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  padding: 10px 0px;\n  border-bottom: 1px solid gray;\n`;\n_c7 = OneComment;\nconst OneCommentInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n_c8 = OneCommentInfo;\nconst ReplyBtn = styled(CommentBtn)`\n  width: 60px;\n  height: 30px;\n  margin: auto;\n  margin: 0px 10px;\n`;\n_c9 = ReplyBtn;\nconst ReplyDeleteBox = styled.div`\n  position: relative;\n  top: 50px;\n  height: 40px;\n`;\n_c10 = ReplyDeleteBox;\nconst ChildReplyForm = styled.form`\n  margin-left: 50px;\n`;\n_c11 = ChildReplyForm;\nconst ChildReplies = styled.ul`\n  padding: 0px;\n`;\n_c12 = ChildReplies;\nconst ChildOneComment = styled(OneComment)`\n  padding: 10px 50px;\n`;\n_c13 = ChildOneComment;\n\nfunction PostDetail(props) {\n  _s();\n\n  const {\n    postId\n  } = useParams();\n  const {\n    state\n  } = useLocation();\n  const navigate = useNavigate();\n  const [childReply, setChildReply] = useState(false);\n  const [imgUrl, setImgUrl] = useState('');\n  const [clickChildReplyIndex, setClickChildReply] = useState();\n  console.log(\"postId:\", postId); //const token = \"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxIiwiaXNzIjoiYmxvZyBwcm9qZWN0IiwiaWF0IjoxNjQ0MDQyNDcwLCJleHAiOjE2NTI2ODI0NzB9.NCoq6o8qLnWoBqw6ob3gOhVDR87ZGgruPiGeWEhyfOugC3ZNjCFFcF-Dn7xUInFYfNv8XY-yKznCQWqj8qX1rw\";\n\n  const getResponse = () => {\n    var axios = require(\"axios\");\n\n    var data = JSON.stringify({});\n    var config = {\n      method: \"get\",\n      url: `http://localhost:8080/api/posts/${postId}`,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      },\n      data: data\n    };\n    axios(config).then(function (response) {\n      console.log(response.data);\n      console.log(\"getResponse에서 받아옴:\", response.data.replyResponseList); // 이게 comments임\n\n      let result = response.data.replyResponseList;\n      const str = response.data.content.split(' ');\n      const urlImage = str[0];\n      const content = str.slice(1);\n      setImgUrl(urlImage);\n      setComments(result);\n      setTitle(response.data.title);\n      setContent(response.data.content);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  const onDelete = event => {\n    event.preventDefault(); //원래 페이지로 돌아가기 */\n\n    console.log(\"삭제버튼누름\");\n\n    var axios = require(\"axios\");\n\n    var data = JSON.stringify(\"string\");\n    var config = {\n      method: \"delete\",\n      url: `http://localhost:8080/api/posts/${postId}`,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      },\n      data: data\n    };\n    axios(config).then(function (response) {\n      console.log(JSON.stringify(response.data));\n      navigate(\"/\");\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  const [title, setTitle] = useState();\n  const [content, setContent] = useState();\n  const [comments, setComments] = useState([]);\n  const textRef = useRef();\n  useEffect(() => {\n    getResponse();\n  }, []);\n\n  const replySubmit = () => {\n    let text = textRef.current.value;\n    textRef.current.value = \"\";\n\n    var axios = require(\"axios\");\n\n    var data = JSON.stringify({\n      content: text,\n      parentReplyId: 0,\n      postId: postId\n    });\n    var config = {\n      method: \"post\",\n      url: \"http://localhost:8080/api/reply\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      },\n      data: data\n    };\n    axios(config).then(function (response) {\n      console.log(response.data.replyResponseList);\n      setComments(response.data.replyResponseList);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  const createChildReply = replyId => {\n    setChildReply(current => !current);\n    setClickChildReply(replyId); //getResponse();\n\n    console.log(\"클릭한 +버튼\", replyId);\n  };\n\n  const [childReplyTyping, setChildReplyType] = useState();\n  /* const postChildReply = (e) => {\n    setChildReplyType(e.target.value);\n  }; */\n\n  const childReplySubmit = e => {\n    // 자식 댓글 등록하기\n    setChildReplyType(\"\");\n    setChildReply(false);\n    e.preventDefault();\n    console.log(\"자식 댓글 담\");\n\n    var axios = require(\"axios\");\n\n    var data = JSON.stringify({\n      content: childReplyTyping,\n      parentReplyId: clickChildReplyIndex,\n      postId: postId\n    });\n    var config = {\n      method: \"post\",\n      url: \"http://localhost:8080/api/reply\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      },\n      data: data\n    };\n    axios(config).then(function (response) {\n      setComments(response.data.replyResponseList);\n      getResponse();\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  const deleteChildReply = replyId => {\n    console.log(\"삭제 버튼\", replyId);\n\n    var axios = require(\"axios\");\n\n    var data = JSON.stringify({});\n    var config = {\n      method: \"delete\",\n      url: `http://localhost:8080/api/reply/${replyId}`,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      },\n      data: data\n    };\n    axios(config).then(function (response) {\n      getResponse();\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.postContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.postTitle,\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.BtnContainer,\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/modify\",\n          state: {\n            title: title,\n            content: content,\n            postId: postId\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.Btn,\n            children: \"\\uC218\\uC815\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.Btn,\n          onClick: onDelete,\n          children: \"\\uC0AD\\uC81C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.postContent,\n        children: content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CommentContainer, {\n        children: [/*#__PURE__*/_jsxDEV(CommentBox, {\n          children: [/*#__PURE__*/_jsxDEV(CommentInput, {\n            ref: textRef,\n            type: \"text\",\n            onKeyPress: e => {\n              if (e.key == \"Enter\" && textRef !== null) {\n                replySubmit();\n                textRef.current.value = \"\";\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CommentBtn, {\n            onClick: replySubmit,\n            children: \"\\uC785\\uB825\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CommentsUl, {\n          children: comments === null || comments === void 0 ? void 0 : comments.map((reply, index) => {\n            var _reply$childReplyDtoL;\n\n            return /*#__PURE__*/_jsxDEV(CommentsLi, {\n              children: [/*#__PURE__*/_jsxDEV(OneComment, {\n                children: [/*#__PURE__*/_jsxDEV(OneCommentInfo, {\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    style: {\n                      fontWeight: \"bold\"\n                    },\n                    children: reply.parentReplyDto.userInfo.username\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 320,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: reply.parentReplyDto.content\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 323,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      marginTop: 10,\n                      fontSize: 12,\n                      color: \"gray\"\n                    },\n                    children: [reply.parentReplyDto.chgDt.slice(0, 10), \" \", reply.parentReplyDto.chgDt.slice(11, 19)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 324,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(ReplyDeleteBox, {\n                  children: [/*#__PURE__*/_jsxDEV(ReplyBtn, {\n                    id: reply.parentReplyDto.replyId,\n                    onClick: e => createChildReply(reply.parentReplyDto.replyId),\n                    children: \"\\uB2F5\\uAE00\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 332,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(ReplyBtn, {\n                    onClick: () => deleteChildReply(reply.parentReplyDto.replyId),\n                    children: \"\\uC0AD\\uC81C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 340,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(ChildReplyForm, {\n                onSubmit: childReplySubmit,\n                children: clickChildReplyIndex === reply.parentReplyDto.replyId && childReply ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    style: {\n                      width: 500,\n                      height: 50,\n                      margin: 20\n                    },\n                    type: \"text\",\n                    onChange: e => {\n                      setChildReplyType(e.target.value);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 354,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ReplyBtn, {\n                    children: \" \\uB4F1\\uB85D\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 361,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true) : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(ChildReplies, {\n                children: (_reply$childReplyDtoL = reply.childReplyDtoList) === null || _reply$childReplyDtoL === void 0 ? void 0 : _reply$childReplyDtoL.map(child => /*#__PURE__*/_jsxDEV(ChildOneComment, {\n                  children: [/*#__PURE__*/_jsxDEV(OneCommentInfo, {\n                    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                      style: {\n                        fontWeight: \"bold\"\n                      },\n                      children: child.userInfo.username\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 369,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: child.content\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 372,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        marginTop: 10,\n                        fontSize: 12,\n                        color: \"gray\"\n                      },\n                      children: [child.chgDt.slice(0, 10), \" \", child.chgDt.slice(11, 19)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 373,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 368,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ReplyBtn, {\n                    onClick: () => deleteChildReply(child.replyId),\n                    children: \"\\uC0AD\\uC81C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 379,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 17\n              }, this)]\n            }, reply.parentReplyDto.replyId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 15\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 276,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PostDetail, \"tEQVHmWswjNXwL4twvEj24Gy6VA=\", false, function () {\n  return [useParams, useLocation, useNavigate];\n});\n\n_c14 = PostDetail;\nexport default PostDetail;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14;\n\n$RefreshReg$(_c, \"CommentInput\");\n$RefreshReg$(_c2, \"CommentContainer\");\n$RefreshReg$(_c3, \"CommentBox\");\n$RefreshReg$(_c4, \"CommentBtn\");\n$RefreshReg$(_c5, \"CommentsUl\");\n$RefreshReg$(_c6, \"CommentsLi\");\n$RefreshReg$(_c7, \"OneComment\");\n$RefreshReg$(_c8, \"OneCommentInfo\");\n$RefreshReg$(_c9, \"ReplyBtn\");\n$RefreshReg$(_c10, \"ReplyDeleteBox\");\n$RefreshReg$(_c11, \"ChildReplyForm\");\n$RefreshReg$(_c12, \"ChildReplies\");\n$RefreshReg$(_c13, \"ChildOneComment\");\n$RefreshReg$(_c14, \"PostDetail\");","map":{"version":3,"sources":["/Users/yunsmac/Desktop/blog/src/component/PostDetail.js"],"names":["useParams","useLocation","axios","useState","useEffect","useRef","Header","styles","Link","useNavigate","Content","token","styled","CommentInput","input","CommentContainer","div","CommentBox","CommentBtn","button","CommentsUl","ul","CommentsLi","li","OneComment","OneCommentInfo","ReplyBtn","ReplyDeleteBox","ChildReplyForm","form","ChildReplies","ChildOneComment","PostDetail","props","postId","state","navigate","childReply","setChildReply","imgUrl","setImgUrl","clickChildReplyIndex","setClickChildReply","console","log","getResponse","require","data","JSON","stringify","config","method","url","headers","Authorization","then","response","replyResponseList","result","str","content","split","urlImage","slice","setComments","setTitle","title","setContent","catch","error","onDelete","event","preventDefault","comments","textRef","replySubmit","text","current","value","parentReplyId","createChildReply","replyId","childReplyTyping","setChildReplyType","childReplySubmit","e","deleteChildReply","postContainer","postTitle","BtnContainer","Btn","postContent","key","map","reply","index","fontWeight","parentReplyDto","userInfo","username","marginTop","fontSize","color","chgDt","width","height","margin","target","childReplyDtoList","child"],"mappings":"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","sourcesContent":["import { useParams, useLocation } from \"react-router\";\n\nimport axios from \"axios\";\nimport { useState, useEffect, useRef } from \"react\";\nimport Header from \"./header/Header\";\nimport styles from \"./PostDetail.module.css\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport Content from \"./content/Content\";\nimport { token } from \"./Api\";\nimport styled from \"styled-components\";\n\nconst CommentInput = styled.input`\n  width: 90%;\n  height: 50px;\n  border: 1px solid gray;\n`;\n\nconst CommentContainer = styled.div`\n  height: 800px;\n\n  padding: 50px;\n`;\n\nconst CommentBox = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: space-between;\n`;\n\nconst CommentBtn = styled.button`\n  width: 60px;\n  height: 50px;\n  margin-left: 40px;\n  font-size: 12px;\n  border: none;\n  border-radius: 4px;\n  background-color: #b4d8e7;\n  color: white;\n  margin: auto 0;\n`;\n\nconst CommentsUl = styled.ul`\n  margin: 30px 0px;\n  padding: 0;\n`;\n\nconst CommentsLi = styled.li`\n  width: 100%;\n  padding: 0px 10px;\n  list-style: none;\n`;\n\nconst OneComment = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  padding: 10px 0px;\n  border-bottom: 1px solid gray;\n`;\n\nconst OneCommentInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ReplyBtn = styled(CommentBtn)`\n  width: 60px;\n  height: 30px;\n  margin: auto;\n  margin: 0px 10px;\n`;\n\nconst ReplyDeleteBox = styled.div`\n  position: relative;\n  top: 50px;\n  height: 40px;\n`;\n\nconst ChildReplyForm = styled.form`\n  margin-left: 50px;\n`;\n\nconst ChildReplies = styled.ul`\n  padding: 0px;\n`;\n\nconst ChildOneComment = styled(OneComment)`\n  padding: 10px 50px;\n`;\n\nfunction PostDetail(props) {\n  const { postId } = useParams();\n  const { state } = useLocation();\n  const navigate = useNavigate();\n  const [childReply, setChildReply] = useState(false);\n  const [imgUrl, setImgUrl] = useState('');\n  const [clickChildReplyIndex, setClickChildReply] = useState();\n\n  console.log(\"postId:\", postId);\n\n  //const token = \"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxIiwiaXNzIjoiYmxvZyBwcm9qZWN0IiwiaWF0IjoxNjQ0MDQyNDcwLCJleHAiOjE2NTI2ODI0NzB9.NCoq6o8qLnWoBqw6ob3gOhVDR87ZGgruPiGeWEhyfOugC3ZNjCFFcF-Dn7xUInFYfNv8XY-yKznCQWqj8qX1rw\";\n\n  const getResponse = () => {\n    var axios = require(\"axios\");\n    var data = JSON.stringify({});\n\n    var config = {\n      method: \"get\",\n      url: `http://localhost:8080/api/posts/${postId}`,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      },\n      data: data,\n    };\n\n    axios(config)\n      .then(function (response) {\n        console.log(response.data);\n        console.log(\"getResponse에서 받아옴:\", response.data.replyResponseList); // 이게 comments임\n        let result = response.data.replyResponseList;\n       \n        const str = response.data.content.split(' ')\n         const urlImage = str[0];\n         const content = str.slice(1)\n        setImgUrl(urlImage)\n        setComments(result);\n\n        setTitle(response.data.title);\n        setContent(response.data.content);\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  };\n\n  const onDelete = (event) => {\n    event.preventDefault();\n\n    //원래 페이지로 돌아가기 */\n    console.log(\"삭제버튼누름\");\n    var axios = require(\"axios\");\n    var data = JSON.stringify(\"string\");\n\n    var config = {\n      method: \"delete\",\n      url: `http://localhost:8080/api/posts/${postId}`,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      },\n      data: data,\n    };\n\n    axios(config)\n      .then(function (response) {\n        console.log(JSON.stringify(response.data));\n        navigate(\"/\");\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  };\n  const [title, setTitle] = useState();\n  const [content, setContent] = useState();\n  const [comments, setComments] = useState([]);\n\n  const textRef = useRef();\n\n  useEffect(() => {\n    getResponse();\n  }, []);\n\n  const replySubmit = () => {\n    let text = textRef.current.value;\n    textRef.current.value = \"\";\n\n    var axios = require(\"axios\");\n    var data = JSON.stringify({\n      content: text,\n      parentReplyId: 0,\n      postId: postId,\n    });\n\n    var config = {\n      method: \"post\",\n      url: \"http://localhost:8080/api/reply\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      },\n      data: data,\n    };\n\n    axios(config)\n      .then(function (response) {\n        console.log(response.data.replyResponseList);\n        setComments(response.data.replyResponseList);\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  };\n  const createChildReply = (replyId) => {\n    setChildReply((current) => !current);\n    setClickChildReply(replyId);\n    //getResponse();\n    console.log(\"클릭한 +버튼\", replyId);\n  };\n\n  const [childReplyTyping, setChildReplyType] = useState();\n\n  /* const postChildReply = (e) => {\n    setChildReplyType(e.target.value);\n  }; */\n\n  const childReplySubmit = (e) => {\n    // 자식 댓글 등록하기\n    setChildReplyType(\"\");\n    setChildReply(false);\n\n    e.preventDefault();\n    console.log(\"자식 댓글 담\");\n    var axios = require(\"axios\");\n    var data = JSON.stringify({\n      content: childReplyTyping,\n      parentReplyId: clickChildReplyIndex,\n      postId: postId,\n    });\n\n    var config = {\n      method: \"post\",\n      url: \"http://localhost:8080/api/reply\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      },\n      data: data,\n    };\n\n    axios(config)\n      .then(function (response) {\n        setComments(response.data.replyResponseList);\n        getResponse();\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  };\n\n  const deleteChildReply = (replyId) => {\n    console.log(\"삭제 버튼\", replyId);\n    var axios = require(\"axios\");\n    var data = JSON.stringify({});\n\n    var config = {\n      method: \"delete\",\n      url: `http://localhost:8080/api/reply/${replyId}`,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      },\n      data: data,\n    };\n\n    axios(config)\n      .then(function (response) {\n        getResponse();\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  };\n\n  return (\n    <div>\n      <div>\n        <Header></Header>\n      </div>\n      <div className={styles.postContainer}>\n        <div className={styles.postTitle}>{title}</div>\n        <div className={styles.BtnContainer}>\n          <Link\n            to={\"/modify\"}\n            state={{\n              title: title,\n              content: content,\n              postId: postId,\n            }}\n          >\n            <button className={styles.Btn}>수정</button>\n          </Link>\n\n          <button className={styles.Btn} onClick={onDelete}>\n            삭제\n          </button>\n        </div>\n        <div className={styles.postContent}>{content}</div>\n\n        <CommentContainer>\n          <CommentBox>\n            <CommentInput\n              ref={textRef}\n              type=\"text\"\n              onKeyPress={(e) => {\n                if (e.key == \"Enter\" && textRef !== null) {\n                  replySubmit();\n                  textRef.current.value = \"\";\n                }\n              }}\n            />\n            <CommentBtn onClick={replySubmit}>입력</CommentBtn>\n          </CommentBox>\n\n          <CommentsUl>\n            {comments?.map((reply, index) => (\n              <CommentsLi key={reply.parentReplyDto.replyId}>\n                <OneComment>\n                  <OneCommentInfo>\n                    <h5 style={{ fontWeight: \"bold\" }}>\n                      {reply.parentReplyDto.userInfo.username}\n                    </h5>\n                    <span>{reply.parentReplyDto.content}</span>\n                    <span\n                      style={{ marginTop: 10, fontSize: 12, color: \"gray\" }}\n                    >\n                      {reply.parentReplyDto.chgDt.slice(0, 10)}{\" \"}\n                      {reply.parentReplyDto.chgDt.slice(11, 19)}\n                    </span>\n                  </OneCommentInfo>\n                  <ReplyDeleteBox>\n                    <ReplyBtn\n                      id={reply.parentReplyDto.replyId}\n                      onClick={(e) =>\n                        createChildReply(reply.parentReplyDto.replyId)\n                      }\n                    >\n                      답글\n                    </ReplyBtn>\n                    <ReplyBtn\n                      onClick={() =>\n                        deleteChildReply(reply.parentReplyDto.replyId)\n                      }\n                    >\n                      삭제\n                    </ReplyBtn>\n                  </ReplyDeleteBox>\n                </OneComment>\n\n                <ChildReplyForm onSubmit={childReplySubmit}>\n                  {clickChildReplyIndex === reply.parentReplyDto.replyId &&\n                  childReply ? (\n                    <>\n                      <input\n                        style={{ width: 500, height: 50, margin: 20 }}\n                        type=\"text\"\n                        onChange={(e) => {\n                          setChildReplyType(e.target.value);\n                        }}\n                      />\n                      <ReplyBtn> 등록</ReplyBtn>\n                    </>\n                  ) : null}\n                </ChildReplyForm>\n                <ChildReplies>\n                  {reply.childReplyDtoList?.map((child) => (\n                    <ChildOneComment>\n                      <OneCommentInfo>\n                        <h5 style={{ fontWeight: \"bold\" }}>\n                          {child.userInfo.username}\n                        </h5>\n                        <span>{child.content}</span>\n                        <span\n                          style={{ marginTop: 10, fontSize: 12, color: \"gray\" }}\n                        >\n                          {child.chgDt.slice(0, 10)} {child.chgDt.slice(11, 19)}\n                        </span>\n                      </OneCommentInfo>\n                      <ReplyBtn onClick={() => deleteChildReply(child.replyId)}>\n                        삭제\n                      </ReplyBtn>\n                    </ChildOneComment>\n                  ))}\n                </ChildReplies>\n              </CommentsLi>\n            ))}\n          </CommentsUl>\n        </CommentContainer>\n      </div>\n    </div>\n  );\n}\n\nexport default PostDetail;\n"]},"metadata":{},"sourceType":"module"}