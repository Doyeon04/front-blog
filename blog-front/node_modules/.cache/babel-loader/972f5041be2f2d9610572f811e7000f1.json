{"ast":null,"code":"var _jsxFileName = \"/Users/yunsmac/Desktop/blog/src/component/modify/Modify.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport styles from \"./modify.module.css\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Header from \"../header/Header\";\nimport axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { token } from \"../Api\";\nimport newContentStyles from \"../newContent/NewContent.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Modify = props => {\n  _s();\n\n  //const token = localStorage.getItem(\"token\");\n  const baseTitle = useLocation().state.title;\n  const baseContent = useLocation().state.content;\n  const postId = useLocation().state.postId;\n  const navigate = useNavigate();\n  const [editedTitle, setEditedTitle] = useState(baseTitle);\n  const [editedContent, setEditedContent] = useState(baseContent);\n  const [editedImg, setEditedImg] = useState(baseContent);\n  const [file, setFile] = useState(\"\");\n  const [imageFile, setImageFile] = useState(\"\"); //const [id, setId] = useState(postId);\n  //setId(useLocation().state.content.postId);\n  // useEffect(()=>{\n  //   //console.log(\"basetitle\",baseTitle);\n  //  //console.log(\"basecontent:\",baseContent);\n  //  //console.log(\"editedContent:\",editedContent);\n  //  console.log(editedContent.includes(\n  //   \"https://blog-img-store2.s3.ap-northeast-2.amazonaws.com\"\n  // ));\n  //   if (\n  //     editedContent.includes(\n  //       \"https://blog-img-store2.s3.ap-northeast-2.amazonaws.com\"\n  //     )\n  //   ){\n  //      const str = editedContent.split(\" \");\n  //      const urlImage = str[0];\n  //      setEditedContent(str.slice(1).toString());\n  //     // console.log(urlImage,\"^^\",editedContent,\"^^\");\n  //      setEditedImg(urlImage);\n  //   }\n  //   else{\n  //     setEditedImg(\"\");\n  //   }\n  // },[]);\n\n  console.log(\"postId:\", useLocation().state.postId);\n  console.log(postId);\n\n  const onEditChangeTitle = e => {\n    setEditedTitle(e.target.value);\n  };\n\n  const onEditChangeContent = e => {\n    setEditedContent(e.target.value);\n  };\n\n  const Submit = () => {\n    var axios = require(\"axios\");\n\n    console.log(editedImg.includes(\"https://blog-img-store2.s3.ap-northeast-2.amazonaws.com\"));\n    var data = JSON.stringify({\n      content: editedImg.includes(\"https://blog-img-store2.s3.ap-northeast-2.amazonaws.com\") ? editedImg + ' ' + editedContent : editedContent,\n      title: editedTitle\n    });\n    var config = {\n      method: \"put\",\n      url: `http://localhost:8080/api/posts/${postId}`,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      },\n      data: data\n    };\n    axios(config).then(function (response) {\n      console.log(response.data); // navigate(\"/\");\n    }).catch(function (error) {\n      console.log(\"content:\", data);\n      console.log(error);\n    });\n  };\n\n  const onChange = e => {\n    e.preventDefault();\n    setFile(URL.createObjectURL(e.target.files[0]));\n    const img = e.target.files[0];\n    const formData = new FormData();\n    formData.append(\"multipartFile\", img);\n    return axios.post(\"http://localhost:8080/api/img/s3/posts/upload\", formData, {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    }).then(res => {\n      console.log(res.data, \"res data\");\n      setEditedImg(res.data);\n    }).catch(err => {\n      alert(\"실패\");\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: newContentStyles.container,\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: newContentStyles.inputContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: newContentStyles.inputTitle,\n          type: \"text\",\n          placeholder: \"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",\n          onChange: onEditChangeTitle,\n          value: editedTitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: editedImg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: editedContent,\n          onChange: onEditChangeContent,\n          className: newContentStyles.inputContent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: newContentStyles.contentButton,\n          onClick: Submit,\n          children: \"\\uB4F1\\uB85D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.imageInputContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: editedImg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/jpg,image/png,image/jpeg,image/gif\",\n          name: \"profile_img\",\n          onChange: onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 9\n        }, this), file && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: file,\n            alt: \"image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.temp,\n      children: [\"content : \", editedContent, \"img : \", editedImg]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Modify, \"UydqKJG6f3o8hhBUcCNxqxKY6Ks=\", false, function () {\n  return [useLocation, useLocation, useLocation, useNavigate, useLocation];\n});\n\n_c = Modify;\nexport default Modify;\n\nvar _c;\n\n$RefreshReg$(_c, \"Modify\");","map":{"version":3,"sources":["/Users/yunsmac/Desktop/blog/src/component/modify/Modify.js"],"names":["React","styles","Button","Form","Header","axios","useState","useEffect","useLocation","useNavigate","token","newContentStyles","Modify","props","baseTitle","state","title","baseContent","content","postId","navigate","editedTitle","setEditedTitle","editedContent","setEditedContent","editedImg","setEditedImg","file","setFile","imageFile","setImageFile","console","log","onEditChangeTitle","e","target","value","onEditChangeContent","Submit","require","includes","data","JSON","stringify","config","method","url","headers","Authorization","then","response","catch","error","onChange","preventDefault","URL","createObjectURL","files","img","formData","FormData","append","post","res","err","alert","container","inputContainer","inputTitle","inputContent","contentButton","imageInputContainer","temp"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport styles from \"./modify.module.css\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Header from \"../header/Header\";\nimport axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { token } from \"../Api\";\nimport newContentStyles from \"../newContent/NewContent.module.css\";\nconst Modify = (props) => {\n  //const token = localStorage.getItem(\"token\");\n\n  const baseTitle = useLocation().state.title;\n  const baseContent = useLocation().state.content;\n  const postId = useLocation().state.postId;\n  const navigate = useNavigate();\n\n  const [editedTitle, setEditedTitle] = useState(baseTitle);\n  const [editedContent, setEditedContent] = useState(baseContent);\n  const [editedImg, setEditedImg] = useState(baseContent);\n\n  const [file, setFile] = useState(\"\");\n  const [imageFile, setImageFile] = useState(\"\");\n  \n  //const [id, setId] = useState(postId);\n  //setId(useLocation().state.content.postId);\n  // useEffect(()=>{\n  //   //console.log(\"basetitle\",baseTitle);\n  //  //console.log(\"basecontent:\",baseContent);\n   \n  //  //console.log(\"editedContent:\",editedContent);\n  //  console.log(editedContent.includes(\n  //   \"https://blog-img-store2.s3.ap-northeast-2.amazonaws.com\"\n  // ));\n  //   if (\n  //     editedContent.includes(\n  //       \"https://blog-img-store2.s3.ap-northeast-2.amazonaws.com\"\n  //     )\n  //   ){\n  //      const str = editedContent.split(\" \");\n  //      const urlImage = str[0];\n  //      setEditedContent(str.slice(1).toString());\n  //     // console.log(urlImage,\"^^\",editedContent,\"^^\");\n  //      setEditedImg(urlImage);\n\n  //   }\n  //   else{\n  //     setEditedImg(\"\");\n  //   }\n  // },[]);\n  \n  console.log(\"postId:\", useLocation().state.postId);\n  console.log(postId);\n\n  const onEditChangeTitle = (e) => {\n    setEditedTitle(e.target.value);\n  };\n\n  const onEditChangeContent = (e) => {\n    setEditedContent(e.target.value);\n  };\n\n  const Submit = () => {\n    var axios = require(\"axios\");\n   console.log(editedImg.includes(\n    \"https://blog-img-store2.s3.ap-northeast-2.amazonaws.com\"\n  ));\n    var data = JSON.stringify({\n      content: (editedImg.includes(\n        \"https://blog-img-store2.s3.ap-northeast-2.amazonaws.com\"\n      ))? (editedImg+' '+editedContent) : editedContent,\n      title: editedTitle,\n    }); \n\n    var config = {\n      method: \"put\",\n      url: `http://localhost:8080/api/posts/${postId}`,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      },\n      data: data,\n    };\n\n    axios(config)\n      .then(function (response) {\n        console.log(response.data);\n        \n        // navigate(\"/\");\n      })\n      .catch(function (error) {\n        console.log(\"content:\",data);\n        console.log(error);\n      \n      });\n  };\n  const onChange = (e) => {\n    e.preventDefault();\n    setFile(URL.createObjectURL(e.target.files[0]));\n    \n    const img = e.target.files[0];\n    const formData = new FormData();\n    formData.append(\"multipartFile\", img);\n\n    return axios\n      .post(\"http://localhost:8080/api/img/s3/posts/upload\", formData, {\n        headers: {\n          \n          Authorization: \"Bearer \" + token,\n        },\n      })\n      .then((res) => {\n       console.log(res.data,\"res data\");\n       setEditedImg(res.data)\n      })\n      .catch((err) => {\n        alert(\"실패\");\n      });\n  };\n  return (\n    <div className={newContentStyles.container}>\n      <Header />\n      <div className={newContentStyles.inputContainer}>\n      <form>\n          <input className={newContentStyles.inputTitle}\n            type=\"text\"\n            placeholder=\"제목을 입력하세요\"\n            onChange={onEditChangeTitle}\n            value={editedTitle}\n          />\n          <img src={editedImg} />\n          <textarea\n            value={editedContent}\n            onChange={onEditChangeContent}\n            className={newContentStyles.inputContent} \n    \n          />\n      <button className={newContentStyles.contentButton} onClick={Submit}>등록</button>\n      </form>\n      <div className={styles.imageInputContainer}>\n        <img src = {editedImg}/>\n        <input\n          type=\"file\"\n          accept=\"image/jpg,image/png,image/jpeg,image/gif\"\n          name=\"profile_img\"\n          onChange={onChange}\n        ></input> \n        {\n        file&&(\n      <div>\n        <img src = {file}  alt = \"image\"/>\n      </div>\n        )\n      }\n      \n      </div>\n    </div>\n    <div className={styles.temp} >content : {editedContent}\n     img : {editedImg}\n    </div>\n    </div>\n  );\n};\n\nexport default Modify;"]},"metadata":{},"sourceType":"module"}