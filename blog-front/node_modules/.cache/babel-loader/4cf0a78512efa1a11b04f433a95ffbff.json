{"ast":null,"code":"var _jsxFileName = \"/Users/yunsmac/Desktop/blog/src/component/newContent/NewContent.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport styles from \"./NewContent.module.css\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Header from \"../header/Header\";\nimport axios from \"axios\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport { token, URL as myURL } from \"../Api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst NewContent = props => {\n  _s();\n\n  let navigate = useNavigate();\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [file, setFile] = useState(\"\");\n  const [imageFile, setImageFile] = useState(\"\");\n  const [imgUrl, setUrlImg] = useState([]);\n  const [fileUrl, setFileUrl] = useState(\"\");\n\n  const onChangeTitle = event => setTitle(event.target.value);\n\n  const onChangeContent = event => setContent(event.target.value);\n\n  const [inputFileName, setInputFileName] = useState(\"첨부 파일\");\n\n  const submit = () => {\n    var axios = require(\"axios\");\n\n    var data = JSON.stringify({\n      content: fileUrl + \",\" + content,\n      title: title\n    });\n    var config = {\n      method: \"post\",\n      url: myURL + \"posts\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      },\n      data: data\n    };\n    axios(config).then(function (response) {\n      console.log(JSON.stringify(response.data));\n      navigate(\"/\");\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  const onChange = e => {\n    e.preventDefault();\n    setFile(URL.createObjectURL(e.target.files[0]));\n    const img = e.target.files[0];\n    setInputFileName(img.name);\n    const formData = new FormData(); //이미지 객체\n\n    formData.append(\"multipartFile\", img); //이렇게 하면 인코딩 필요x\n\n    return axios.post(myURL + \"img/s3/posts/upload\", formData, {\n      headers: {\n        //formdata쓰려면 contentType 안써야 됨\n        Authorization: \"Bearer \" + token\n      }\n    }).then(res => {\n      //response로 날라와서\n      setUrlImg([...imgUrl, res.data]);\n    }) //이미지 전송 -> 로컬서버에 이미지파일 자체가 저장 -> s3에 올리기\n    //이미지 ,파일을 저장,관리 s3 = storage3 저장고\n    //s3에서 프론트에 다시 image url 전송\n    .catch(err => {\n      alert(\"실패\");\n    });\n  };\n\n  useEffect(() => {\n    setFileUrl(imgUrl.join(\" \"));\n  }, [imgUrl]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      name: \"NewContent\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.imageAndInput,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.inputContainer,\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: styles.inputTitle,\n            type: \"text\",\n            placeholder: \"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",\n            onChange: onChangeTitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.contentImage,\n            style: {\n              display: \"flex\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              style: {\n                width: \"900px\"\n              },\n              className: styles.inputContent,\n              placeholder: \"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",\n              onChange: onChangeContent\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.inputFileImageDiv,\n        children: imgUrl && imgUrl.map(url => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.oneImage,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: url\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.imageInputContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: styles.imageInputFileForm,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"image_input\",\n          type: \"file\",\n          accept: \"image/jpg,image/png,image/jpeg,image/gif\",\n          name: \"profile_img\",\n          onChange: onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"image_input\",\n          children: \"\\uD30C\\uC77C \\uC120\\uD0DD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.imageButton,\n          onClick: submit,\n          children: \"\\uB4F1\\uB85D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n\n_s(NewContent, \"kHflfcGRc9rVp48+950+2VuLTJE=\", false, function () {\n  return [useNavigate];\n});\n\n_c = NewContent;\nexport default NewContent;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewContent\");","map":{"version":3,"sources":["/Users/yunsmac/Desktop/blog/src/component/newContent/NewContent.js"],"names":["React","styles","Button","Form","Header","axios","useNavigate","Link","useState","useEffect","token","URL","myURL","NewContent","props","navigate","title","setTitle","content","setContent","file","setFile","imageFile","setImageFile","imgUrl","setUrlImg","fileUrl","setFileUrl","onChangeTitle","event","target","value","onChangeContent","inputFileName","setInputFileName","submit","require","data","JSON","stringify","config","method","url","headers","Authorization","then","response","console","log","catch","error","onChange","e","preventDefault","createObjectURL","files","img","name","formData","FormData","append","post","res","err","alert","join","container","imageAndInput","inputContainer","inputTitle","contentImage","display","width","inputContent","inputFileImageDiv","map","oneImage","imageInputContainer","imageInputFileForm","imageButton"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport styles from \"./NewContent.module.css\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Header from \"../header/Header\";\nimport axios from \"axios\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport { token, URL as myURL } from \"../Api\";\n\nconst NewContent = (props) => {\n  let navigate = useNavigate();\n\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [file, setFile] = useState(\"\");\n  const [imageFile, setImageFile] = useState(\"\");\n  const [imgUrl, setUrlImg] = useState([]);\n  const [fileUrl, setFileUrl] = useState(\"\");\n  const onChangeTitle = (event) => setTitle(event.target.value);\n  const onChangeContent = (event) => setContent(event.target.value);\n  const [inputFileName, setInputFileName] = useState(\"첨부 파일\");\n\n  const submit = () => {\n    var axios = require(\"axios\");\n    var data = JSON.stringify({\n      content: fileUrl + \",\" + content,\n      title: title,\n    });\n\n    var config = {\n      method: \"post\",\n      url: myURL + \"posts\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token,\n      },\n      data: data,\n    };\n\n    axios(config)\n      .then(function (response) {\n        console.log(JSON.stringify(response.data));\n        navigate(\"/\");\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  };\n\n  const onChange = (e) => {\n    e.preventDefault();\n    setFile(URL.createObjectURL(e.target.files[0]));\n\n    const img = e.target.files[0];\n\n    setInputFileName(img.name);\n    const formData = new FormData(); //이미지 객체\n    formData.append(\"multipartFile\", img); //이렇게 하면 인코딩 필요x\n\n    return (\n      axios\n        .post(myURL + \"img/s3/posts/upload\", formData, {\n          headers: {\n            //formdata쓰려면 contentType 안써야 됨\n            Authorization: \"Bearer \" + token,\n          },\n        })\n        .then((res) => {\n          //response로 날라와서\n          setUrlImg([...imgUrl, res.data]);\n        }) //이미지 전송 -> 로컬서버에 이미지파일 자체가 저장 -> s3에 올리기\n        //이미지 ,파일을 저장,관리 s3 = storage3 저장고\n        //s3에서 프론트에 다시 image url 전송\n        .catch((err) => {\n          alert(\"실패\");\n        })\n    );\n  };\n  useEffect(() => {\n    setFileUrl(imgUrl.join(\" \"));\n  }, [imgUrl]);\n\n  return (\n    <div className={styles.container}>\n      <Header name=\"NewContent\" />\n      <div className={styles.imageAndInput}>\n        <div className={styles.inputContainer}>\n          <form>\n            <input\n              className={styles.inputTitle}\n              type=\"text\"\n              placeholder=\"제목을 입력하세요\"\n              onChange={onChangeTitle}\n            />\n            <div className={styles.contentImage} style={{ display: \"flex\" }}>\n              <textarea\n                style={{ width: \"900px\" }}\n                className={styles.inputContent}\n                placeholder=\"내용을 입력하세요\"\n                onChange={onChangeContent}\n              />\n            </div>\n          </form>\n        </div>\n        <div className={styles.inputFileImageDiv}>\n          {imgUrl &&\n            imgUrl.map((url) => (\n              <div className={styles.oneImage}>\n                <img src={url} />\n              </div>\n            ))}\n        </div>\n      </div>\n\n      <div className={styles.imageInputContainer}>\n        <form className={styles.imageInputFileForm}>\n          <input\n            id=\"image_input\"\n            type=\"file\"\n            accept=\"image/jpg,image/png,image/jpeg,image/gif\"\n            name=\"profile_img\"\n            onChange={onChange}\n          ></input>\n          <label for=\"image_input\">파일 선택</label>\n\n          {/*    <input\n            className={styles.upload_name}\n            value={inputFileName}\n            placeholder=\"첨부파일\"\n            maxLength={30}\n            onChange={onChange}\n          ></input> */}\n        </form>\n        <div>\n          <button className={styles.imageButton} onClick={submit}>\n            등록\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default NewContent;\n"]},"metadata":{},"sourceType":"module"}